<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>ç»ƒè€³ç¨‹åº</title>
        <style>
            body {
                font-family: sans-serif;
                text-align: center;
                padding: 50px;
            }
            button {
                margin: 10px;
                padding: 10px 20px;
                font-size: 18px;
            }
        </style>
    </head>
    <body>
        <h1>ğŸµç»ƒè€³å°æ¸¸æˆ</h1>
        <p>ç‚¹å‡»â€œæ’­æ”¾éŸ³ç¬¦â€ï¼Œç„¶åçŒœçŒœå¬åˆ°çš„æ˜¯å“ªä¸ªéŸ³ã€‚</p>
        <button onclick="playNote()">æ’­æ”¾éŸ³ç¬¦</button>
        <div id="buttons"></div>
        <p id="result"></p>

        <script>
            const notes = [
                { name: "C", freq: 261.63 },
                { name: "D", freq: 293.66 },
                { name: "E", freq: 329.63 },
                { name: "F", freq: 349.23 },
                { name: "G", freq: 392.0 },
                { name: "A", freq: 440.0 },
                { name: "B", freq: 493.88 },
            ];

            let currentNote = null;

            // åˆ›å»ºæŒ‰é’®
            const buttonsDiv = document.getElementById("buttons");
            notes.forEach((note) => {
                const btn = document.createElement("button");
                btn.innerText = note.name;
                btn.onclick = () => checkAnswer(note.name);
                buttonsDiv.appendChild(btn);
            });

            function playNote() {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();

                // é€‰ä¸€ä¸ªéšæœºéŸ³ç¬¦
                currentNote = notes[Math.floor(Math.random() * notes.length)];

                oscillator.frequency.setValueAtTime(currentNote.freq, audioCtx.currentTime);
                oscillator.type = "sine";
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                // è®¾ç½®éŸ³é‡å’Œæ—¶é•¿
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 1);
            }

            function checkAnswer(name) {
                const result = document.getElementById("result");
                if (!currentNote) {
                    result.textContent = "è¯·å…ˆæ’­æ”¾éŸ³ç¬¦å†çŒœå“¦ï½";
                    return;
                }

                if (name === currentNote.name) {
                    result.textContent = `âœ…æ­£ç¡®ï¼è¿™æ˜¯ ${currentNote.name}`;
                } else {
                    result.textContent = `âŒ é”™äº†ï¼Œè¿™æ˜¯ ${currentNote.name}`;
                }
            }
        </script>
    </body>
</html>
